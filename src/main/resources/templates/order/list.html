<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Order List</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        :root {
            --primary-color: #242440;
            --secondary-color: #4F5D75;
            --accent-color: #8B4513;
            --success-color: #275232;
            --danger-color: #9c2626;
            --warning-color: #a56408;
            --table-bg: rgba(36, 36, 64, 0.98);
        }

        body {
            background: var(--primary-color);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .table-container {
            max-width: 1000px;
            margin: 40px auto;
            background: var(--table-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .page-title {
            text-align: center;
            color: var(--accent-color);
            font-size: 2rem;
            font-weight: bold;
        }

        .table {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            border-radius: 10px;
            overflow: hidden;
        }

        thead {
            background: var(--secondary-color);
            color: var(--text-light);
            text-align: center;
        }

        tbody tr:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .status-badge {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }

        .approved { background-color: var(--success-color); color: white; }
        .rejected { background-color: var(--danger-color); color: white; }
        .borrowed { background-color: var(--warning-color); color: white; }
        .returned { background-color: #007bff; color: white; }
        .overdue { background-color: #dc3545; color: white; }

        .btn-custom {
            font-size: 0.9rem;
            padding: 8px 12px;
            font-weight: bold;
            border-radius: 5px;
            transition: all 0.3s;
            text-decoration: none;
            color: white;
        }

        .btn-approve { background: var(--success-color); }
        .btn-reject { background: var(--danger-color); }
        .btn-return { background: #007bff; }

        .btn-approve:hover { background: #1f4324; }
        .btn-reject:hover { background: #7b1e1e; }
        .btn-return:hover { background: #0056b3; }
    </style>
</head>
<body>

<div class="container">
    <div class="table-container">
        <h2 class="page-title">Order List</h2>

        <table class="table table-hover">
            <thead>
            <tr>
                <th>Order ID</th>
                <th>Student</th>
                <th>Book</th>
                <th>Order Time</th>
                <th>Due Date</th>
                <th>Status</th>
                <th>Fine</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="order : ${orders}">
                <td th:text="${order.id}"></td>
                <td th:text="${order.studentSif}"></td>
                <td th:text="${order.bookId}"></td>
                <td th:text="${order.orderTimestamp}"></td>
                <td th:text="${order.dueDate}"></td>

                <td>
                    <span th:classappend="${order.status == 'APPROVED' ? 'status-badge approved' :
                                          order.status == 'REJECTED' ? 'status-badge rejected' :
                                          order.status == 'BORROWED' ? 'status-badge borrowed' :
                                          order.status == 'RETURNED' ? 'status-badge returned' :
                                          'status-badge overdue'}"
                          th:text="${order.status}"></span>
                </td>

                <td th:text="${order.fineAmount}"></td>

                <td>
                    <a th:if="${order.status == 'BORROWED'}"
                       th:href="@{'/orders/return/' + ${order.id}}" class="btn-custom btn-return">Return</a>
                    <a th:if="${order.status == 'APPROVED'}"
                       th:href="@{'/orders/approve/' + ${order.id}}" class="btn-custom btn-approve">Approve</a>
                    <a th:if="${order.status == 'REJECTED'}"
                       th:href="@{'/orders/reject/' + ${order.id}}" class="btn-custom btn-reject">Reject</a>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="text-center mt-3">
            <a href="/orders/create" class="btn btn-success">Create New Order</a>
        </div>
    </div>
</div>

</body>
</html>
